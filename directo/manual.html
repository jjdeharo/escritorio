<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - Conexión en Directo</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .prose {
            max-width: 80ch;
        }
        .prose h2 {
            font-size: 1.875rem;
            font-weight: 800;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }
        .prose h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
        }
        .prose p, .prose li {
            font-size: 1.125rem;
            color: #374151;
            line-height: 1.75;
        }
        .prose ul {
            list-style-position: inside;
            list-style-type: disc;
            padding-left: 0.5rem;
        }
        .tab-button {
            transition: all 0.2s ease-in-out;
            border-bottom: 3px solid transparent;
        }
        .tab-button.active {
            font-weight: 700;
        }
        .tab-button.active.vota { border-color: #22c55e; color: #166534; }
        .tab-button.active.nube { border-color: #f97316; color: #9a3412; }
        .tab-button.active.ideas { border-color: #a855f7; color: #7e22ce; }
        .tab-button.active.muro { border-color: #0891b2; color: #155e75; }
        .tab-button.active.escala { border-color: #3b82f6; color: #1e40af; }
        .tab-button.active.qplay { border-color: #facc15; color: #b45309; }
        .tab-button.active.boardlive { border-color: #f472b6; color: #9d174d; }
        .tab-button.active.general { border-color: #6b7280; color: #1f2937; }
        .tab-button.active.privacidad { border-color: #6b7280; color: #1f2937; }

        #lang-selector,
        #lang-selector-participant,
        #lang-selector-container {
          display: none !important;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto px-4 py-8 md:py-12">
        <div class="absolute top-4 right-4 z-10">
            <select id="lang-selector" onchange="setLanguage(this.value)" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                <option value="es">Español</option>
                <option value="ca">Català</option>
                <option value="gl">Galego</option>
                <option value="eu">Euskara</option>
                <option value="en">English</option>
                <option value="de">Deutsch</option>
            </select>
        </div>
         <div class="absolute top-4 left-4 z-10">
             <a href="index.html" id="home-link" title="Volver al inicio" class="text-gray-400 hover:text-blue-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
             </a>
        </div>


        <article class="prose lg:prose-xl mx-auto bg-white rounded-lg shadow-md">
            <div class="p-8 sm:p-12">
                <h1 id="main-title">Guía de Uso: Conexión en Directo</h1>

                <div class="border-b border-gray-200 mb-8">
                    <nav class="-mb-px flex flex-wrap gap-x-6" aria-label="Tabs">
                        <button onclick="showTab('general')" class="tab-button general active flex items-center gap-2 p-4 text-lg" data-translate-key="general-title">
                            Aspectos Generales
                        </button>
                         <button onclick="showTab('privacidad')" class="tab-button privacidad flex items-center gap-2 p-4 text-lg" data-translate-key="privacy-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                             </svg>
                            Privacidad
                        </button>
                        <button onclick="showTab('vota')" class="tab-button vota flex items-center gap-2 p-4 text-lg" data-translate-key="app-vota-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                             Votación Simple
                        </button>
                         <button onclick="showTab('nube')" class="tab-button nube flex items-center gap-2 p-4 text-lg" data-translate-key="app-nube-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>
                             Nube de Palabras
                        </button>
                        <button onclick="showTab('ideas')" class="tab-button ideas flex items-center gap-2 p-4 text-lg" data-translate-key="app-ideas-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                            Lluvia de Ideas
                        </button>
                        <button onclick="showTab('muro')" class="tab-button muro flex items-center gap-2 p-4 text-lg" data-translate-key="app-muro-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                            Muro Interactivo
                        </button>
                        <button onclick="showTab('escala')" class="tab-button escala flex items-center gap-2 p-4 text-lg" data-translate-key="app-escala-title">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                             </svg>
                            Escala de Valoración
                        </button>
                        <button onclick="showTab('qplay')" class="tab-button qplay flex items-center gap-2 p-4 text-lg" data-translate-key="app-qplay-title">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                               <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                            </svg>
                           QPlay
                       </button>
                        <button onclick="showTab('boardlive')" class="tab-button boardlive flex items-center gap-2 p-4 text-lg" data-translate-key="app-boardlive-title">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                           BoardLive
                       </button>
                    </nav>
                </div>

                <div id="tab-content">
                    <section id="general" class="tab-pane active">
                        <h2 id="general-title-content">Aspectos Generales</h2>
                        <p id="general-intro-p1">"Conexión en Directo" es un conjunto de herramientas gratuitas y de código abierto diseñadas para dinamizar clases, conferencias o cualquier evento en directo. Permiten fomentar la participación de la audiencia en tiempo real a través de actividades interactivas como encuestas, nubes de palabras, lluvias de ideas o muros colaborativos.</p>
                        <h3 id="general-how-it-works-title">¿Cómo funcionan estas aplicaciones?</h3>
                        <p id="general-how-it-works-p1">Todas las herramientas de "Conexión en Directo" se basan en la tecnología <strong>WebRTC (Peer-to-Peer)</strong>. Esto significa que la comunicación se establece directamente entre el dispositivo del presentador y los de los participantes, sin necesidad de un servidor intermedio que almacene datos. La información viaja de forma segura y desaparece en cuanto se cierra la sesión.</p>
                        <h3 id="general-roles-title">Roles de Usuario</h3>
                        <p id="general-roles-p1">En cada aplicación existen dos roles claros:</p>
                        <ul>
                            <li id="general-roles-li1"><strong>Presentador:</strong> Es quien crea, configura y gestiona la actividad. Desde su pantalla controla la sesión y visualiza los resultados consolidados en tiempo real.</li>
                            <li id="general-roles-li2"><strong>Participante:</strong> Es quien se une a una sesión ya creada. Interactúa enviando sus respuestas (votos, palabras, ideas) desde su propio dispositivo.</li>
                        </ul>

                        <h3 id="general-joining-title">Cómo unirse a una sesión (participante)</h3>
                        <p id="general-joining-p1">Una vez que el presentador ha iniciado una actividad, los participantes tienen tres formas sencillas de conectarse:</p>
                        <ul>
                            <li id="general-joining-li1"><strong>Código QR:</strong> La forma más rápida. Simplemente escaneando con la cámara del móvil el código QR que se muestra en la pantalla del presentador.</li>
                            <li id="general-joining-li2"><strong>Enlace directo:</strong> El presentador puede compartir un enlace único. Al hacer clic, el participante entra directamente a la sesión.</li>
                            <li id="general-joining-li3"><strong>Código manual:</strong> El participante puede abrir la página principal de la aplicación e introducir el código corto (normalmente de 6 caracteres) que se muestra en la pantalla del presentador.</li>
                        </ul>

                        <h3 id="general-customization-title">Personalización de la actividad</h3>
                        <p id="general-customization-p1">Todas las aplicaciones permiten al presentador unificar la estética de la actividad eligiendo un <strong>color base</strong>. Este color se aplica a los botones, fondos y otros elementos visuales, creando una experiencia coherente. Además del color, se pueden configurar todos los parámetros de la actividad, como la pregunta, las opciones de respuesta o los límites de participación.</p>

                        <h3 id="general-prepare-title">La función "Preparar Sesión"</h3>
                        <p id="general-prepare-p1">Esta función genera un <strong>enlace único</strong> que guarda toda la configuración de tu actividad (la pregunta, las opciones, el color, etc.). Puedes guardar este enlace para usarlo más tarde, compartirlo con otros compañeros o tener tus clases y talleres preparados con antelación sin necesidad de volver a introducir los datos.</p>
                        
                        <h3 id="general-pause-title">Control de la Participación: Pausar y Reanudar</h3>
                        <p id="general-pause-p1">Todas las aplicaciones incluyen un botón en la vista del presentador que permite <strong>detener y reanudar</strong> la recepción de respuestas en cualquier momento. Esto es útil para controlar el ritmo de la actividad, por ejemplo, pausando el envío de ideas mientras se da una explicación. Cuando la participación está detenida, los participantes verán un mensaje indicándolo y no podrán enviar nuevas respuestas hasta que el presentador la reanude.</p>

                        <h3 id="general-connections-title">Consideraciones sobre el número de conexiones</h3>
                        <p id="general-connections-p1">Al ser una conexión directa, el rendimiento depende de dos factores clave: la <strong>potencia del ordenador y el ancho de banda de la red del presentador</strong>. Cada participante abre una conexión directa con el presentador, que debe gestionar todas simultáneamente.</p>
                        <p id="general-connections-p2">Por este motivo, distinguimos dos tipos de aplicaciones:</p>
                         <ul>
                            <li id="general-connections-li1"><strong>Conexiones Persistentes (Muro Interactivo, Lluvia de Ideas y Votos):</strong> En estas aplicaciones, las conexiones se mantienen abiertas para permitir una interacción continua (ver cambios en tiempo real o participar en múltiples fases). Por ello, se recomienda un uso óptimo con grupos de hasta <strong>30-40 participantes</strong> para asegurar la fluidez.</li>
                            <li id="general-connections-li2"><strong>Conexiones Breves (Votación, Nube de Palabras, Escala):</strong> En estas herramientas, la conexión se establece, envía el dato y se cierra en segundos. Esta eficiencia permite manejar un número mucho mayor de participantes, <strong>potencialmente varios cientos</strong>, ya que no se sobrecarga el dispositivo del presentador. Los navegadores son capaces de gestionar picos de decenas de conexiones nuevas por segundo, facilitando la participación masiva.</li>
                        </ul>
                        <h3 id="general-issues-title">Sugerencias y reporte de fallos</h3>
                        <p id="general-issues-p1">Si encuentras algún fallo, tienes alguna duda o quieres proponer una mejora, puedes hacerlo a través de la sección "Issues" del repositorio en GitHub. Para ello, visita <a href="https://github.com/jjdeharo/directo/issues" target="_blank">https://github.com/jjdeharo/directo/issues</a> y haz clic en el botón verde "New issue". Describe tu consulta o problema de la forma más detallada posible.</p>
                    </section>

                    <section id="privacidad" class="tab-pane hidden">
                        <h2 id="privacy-title-content" class="text-gray-700">Privacidad y Gestión de Datos</h2>
                        <h3 id="privacy-p2p-title">Un modelo sin servidores</h3>
                        <p id="privacy-p2p-p1">La principal ventaja de usar WebRTC es que <strong>ningún dato de la sesión pasa por un servidor central</strong>. La información (votos, ideas, etc.) viaja cifrada directamente desde el navegador de cada participante al navegador del presentador.</p>
                         <h3 id="privacy-advantages-title">¿Qué implica esto para la privacidad?</h3>
                        <ul>
                            <li id="privacy-advantages-li1"><strong>No hay registro de datos:</strong> Al no haber una base de datos central, ninguna respuesta queda almacenada en la nube. Una vez que el presentador cierra la pestaña de la sesión, toda la información se pierde de forma definitiva.</li>
                            <li id="privacy-advantages-li2"><strong>Anonimato:</strong> Las aplicaciones no solicitan ni guardan ninguna información personal de los participantes. La conexión se basa en un código de sesión anónimo.</li>
                             <li id="privacy-advantages-li3"><strong>Control total del presentador:</strong> El presentador es el único que recibe y visualiza los datos en su dispositivo. Si decide exportar los resultados (a PDF o CSV), esos archivos se guardan localmente en su propio ordenador, bajo su control y responsabilidad.</li>
                        </ul>
                        <p id="privacy-p2p-p2">Este enfoque garantiza un alto nivel de privacidad y lo hace ideal para cualquier tipo de encuentro (educativo, profesional o social), ya que ni el creador de la herramienta ni terceros tienen acceso a los datos generados durante las actividades.</p>
                    </section>

                    <section id="vota" class="tab-pane hidden">
                        <h2 id="app-vota-title-content" class="text-green-700">Votación Simple</h2>
                        <p id="app-vota-desc">Es una herramienta para lanzar preguntas de opción múltiple de forma rápida. El presentador define una pregunta y varias opciones de respuesta. Los participantes eligen una opción y los resultados se muestran instantáneamente como un gráfico de barras porcentual en la pantalla del presentador.</p>
                    </section>

                    <section id="nube" class="tab-pane hidden">
                        <h2 id="app-nube-title-content" class="text-orange-700">Nube de Palabras</h2>
                        <p id="app-nube-desc">Ideal para lluvias de ideas rápidas. Los participantes envían palabras o frases cortas en respuesta a una pregunta. Estas palabras forman una nube dinámica donde la frecuencia de cada término determina su tamaño. El resultado final se puede exportar como una imagen <strong>PNG</strong> o los datos brutos como una hoja de cálculo (<strong>CSV</strong>).</p>
                    </section>

                    <section id="ideas" class="tab-pane hidden">
                        <h2 id="app-ideas-title-content" class="text-purple-700">Lluvia de Ideas y Votos</h2>
                        <p id="app-ideas-desc">Esta aplicación se desarrolla en dos fases. Primero, los participantes envían sus ideas o propuestas de forma anónima. Una vez finalizada la fase de propostas, el presentador inicia la fase de votación, donde cada participante puede votar por un número determinado de ideas enviadas por los demás. Sirve para generar y priorizar ideas de forma colectiva.</p>
                    </section>

                    <section id="muro" class="tab-pane hidden">
                        <h2 id="app-muro-title-content" class="text-cyan-700">Muro Interactivo</h2>
                        <p id="app-muro-desc">Funciona como un corcho digital o una pizarra colaborativa. Los participantes envían "post-its" virtuales con un título y un texto. El presentador puede ver todas las notas en un lienzo infinito, moverlas, agruparlas y organizarlas libremente. Es importante recordar que el contenido del muro <strong>no es persistente</strong> y se pierde al cerrar la sesión, pero se puede exportar una captura como <strong>PDF</strong> o los datos como <strong>CSV</strong>.</p>
                    </section>
                    
                    <section id="escala" class="tab-pane hidden">
                        <h2 id="app-escala-title-content" class="text-blue-700">Escala de Valoración</h2>
                        <p id="app-escala-desc">Permite crear diferentes tipos de escalas de valoración (tipo Likert, numéricas, semáforo o totalmente personalizadas) para recoger la opinión de la audiencia sobre un tema. Los resultados se visualizan como gráficos de barras o en un formato de semáforo, facilitando una interpretación rápida del sentir general. Es ideal para realizar sondeos de opinión, medir el grado de acuerdo o evaluar la comprensión de un concepto.</p>
                    </section>
                    <section id="qplay" class="tab-pane hidden">
                        <h2 id="app-qplay-title-content" class="text-yellow-700">QPlay: Concurso Interactivo</h2>
                        <p id="app-qplay-desc">Una herramienta para gamificar el aula. El profesor carga un cuestionario y los alumnos compiten en tiempo real desde sus dispositivos para liderar la clasificación.</p>
                    </section>
                    <section id="boardlive" class="tab-pane hidden">
                        <h2 id="app-boardlive-title-content" class="text-pink-700">BoardLive: Pizarra colaborativa</h2>
                        <p id="app-boardlive-desc">Pizarra colaborativa en tiempo real pensada para clases, tutorías y talleres. El anfitrión crea la sesión, comparte un código o QR y decide quién puede dibujar (bloqueo global, permisos individuales y revocación instantánea). El lienzo se sincroniza en vivo entre todos los participantes, incluyendo la vista, el zoom y el fondo, para que vean exactamente lo mismo. Incluye páginas múltiples con miniaturas, herramientas de dibujo (trazo libre, resaltador, figuras, borrador) y control de color y grosor, además de inserción y edición de imágenes. Permite exportar el trabajo a PDF y gestionar el contenido por páginas. También permite que el profesorado proyecte en la pizarra digital del aula lo que escribe o dibuja en su tablet en tiempo real, facilitando explicaciones dinámicas y seguimiento inmediato del grupo.</p>
                    </section>
                </div>
            </div>
        </article>
    </div>

    <script>
                                                                const APP_ID = 'manual';
                                let translations = {};
        const fallbackLanguages = [
            { code: 'es', name: 'Español' },
            { code: 'ca', name: 'Català' },
            { code: 'gl', name: 'Galego' },
            { code: 'eu', name: 'Euskara' },
            { code: 'en', name: 'English' },
            { code: 'de', name: 'Deutsch' }
        ];
        const safeJson = async (response, fallback) => {
            try {
                return await response.json();
            } catch (error) {
                return fallback;
            }
        };

                                
                                async function loadTranslations() {
                                    const response = await fetch('locales/index.json', { cache: 'no-store' });
                                    const languages = response.ok
                                        ? await safeJson(response, fallbackLanguages)
                                        : fallbackLanguages;
                                    const selectorIds = ['lang-selector', 'lang-selector-participant'];
                                    selectorIds.forEach((id) => {
                                        const select = document.getElementById(id);
                                        if (!select) return;
                                        select.innerHTML = '';
                                        languages.forEach((lang) => {
                                            const option = document.createElement('option');
                                            option.value = lang.code;
                                            option.textContent = lang.name;
                                            select.appendChild(option);
                                        });
                                    });
                                
                                    const entries = await Promise.all(languages.map(async (lang) => {
                                        const langResp = await fetch(`locales/${APP_ID}/${lang.code}.json`, { cache: 'no-store' });
                                        if (!langResp.ok) return [lang.code, null];
                                        const json = await safeJson(langResp, null);
                                        return [lang.code, json];
                                    }));
                                    translations = Object.fromEntries(entries);
                                    if (!translations.es) {
                                        throw new Error(`Falta locales/${APP_ID}/es.json`);
                                    }
                                    Object.keys(translations).forEach((code) => {
                                        if (!translations[code]) translations[code] = translations.es;
                                    });
                                    return translations;
                                }

        function setLanguage(lang) {
            if (!translations[lang]) return;
            localStorage.setItem('preferred_language', lang);
            document.documentElement.lang = lang;
            
            Object.keys(translations.es).forEach(key => {
                const element = document.getElementById(key);
                const translation = translations[lang]?.[key] || translations.es[key];
                if (element) {
                    element.innerHTML = translation;
                } else {
                    const elements = document.querySelectorAll(`[data-translate-key="${key}"]`);
                    elements.forEach(el => {
                        const icon = el.querySelector('svg');
                        const text = translation;
                        el.innerHTML = ''; 
                        if (icon) el.prepend(icon);
                        el.append(text);
                    });
                }
            });
            
            document.getElementById('general-title-content').innerHTML = translations[lang]?.['general-title'] || translations.es['general-title'];
            document.getElementById('privacy-title-content').innerHTML = translations[lang]?.['privacy-title'] || translations.es['privacy-title'];
            document.getElementById('app-vota-title-content').innerHTML = translations[lang]?.['app-vota-title'] || translations.es['app-vota-title'];
            document.getElementById('app-nube-title-content').innerHTML = translations[lang]?.['app-nube-title'] || translations.es['app-nube-title'];
            document.getElementById('app-ideas-title-content').innerHTML = translations[lang]?.['app-ideas-title'] || translations.es['app-ideas-title'];
            document.getElementById('app-muro-title-content').innerHTML = translations[lang]?.['app-muro-title'] || translations.es['app-muro-title'];
            document.getElementById('app-escala-title-content').innerHTML = translations[lang]?.['app-escala-title'] || translations.es['app-escala-title'];
            document.getElementById('app-qplay-title-content').innerHTML = translations[lang]?.['app-qplay-title'] || translations.es['app-qplay-title'];
            document.getElementById('app-boardlive-title-content').innerHTML = translations[lang]?.['app-boardlive-title'] || translations.es['app-boardlive-title'];
            document.getElementById('home-link').setAttribute('title', translations[lang]?.['home-link-title'] || translations.es['home-link-title']);
        }


        function showTab(tabName) {
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.add('hidden');
            });
            document.getElementById(tabName).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.tab-button.${tabName}`).classList.add('active');
        }

        window.onload = async () => {
            try {
                await loadTranslations();
            } catch (error) {
                console.error(error);
            }
            const urlLang = new URLSearchParams(window.location.search).get('lang');
            const normalizedUrlLang = urlLang ? urlLang.split('-')[0] : null;
            const browserLang = (navigator.language || navigator.userLanguage).split('-')[0];
            const langToSet = (normalizedUrlLang && translations[normalizedUrlLang])
                ? normalizedUrlLang
                : (translations[browserLang] ? browserLang : 'es');
            
            document.getElementById('lang-selector').value = langToSet;
            setLanguage(langToSet);
            showTab('general');
        };
    </script>

</body>
</html>
