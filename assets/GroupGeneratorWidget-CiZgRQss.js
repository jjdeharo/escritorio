import{u as q,r as l,j as e,b as D,M as T}from"./index-CBs-prxP.js";import{v as ee}from"./index-CBs-prxP.js";import{E as J}from"./expand-D4fO6U1z.js";const X=()=>{const{t:n}=q(),[y,w]=l.useState(`Ana
Beatriz
Carlos
Daniela
Esteban
Fernanda
Gael
Hilda
IvÃ¡n
Julia`),[j,C]=l.useState("byCount"),[d,$]=l.useState(3),[i,N]=l.useState([]),[c,_]=l.useState(!1),z=l.useRef(null),M=l.useRef(null),S=l.useRef(null),G=l.useRef(null),R=l.useRef({titleSize:0,textSize:0,minCardWidth:0,containerHeight:0});l.useEffect(()=>{if(!c)return;const t=M.current,r=S.current,s=G.current;if(!t||!r||!s)return;let a=0;const o=()=>{if(!t||!r||!s)return;const h=getComputedStyle(t),I=parseFloat(h.paddingTop)||0,L=parseFloat(h.paddingBottom)||0,V=parseFloat(h.rowGap||h.gap)||0,m=Math.max(120,t.clientHeight-r.offsetHeight-I-L-V);s.style.height=`${m}px`;const H=s.clientWidth,B=Math.max(1,i.length),O=Math.min(B,Math.max(1,Math.floor(H/320))),x=Math.max(240,Math.floor(H/O)-16),k=16,U=Math.min(40,Math.max(20,Math.floor(m/5)));let F=k,P=U,u=k;for(let E=0;E<12;E+=1){const g=Math.floor((F+P)/2);t.style.setProperty("--group-text-size",`${g}px`),t.style.setProperty("--group-title-size",`${Math.round(g*1.2)}px`),t.style.setProperty("--group-card-min",`${x}px`),s.scrollHeight<=s.clientHeight?(u=g,F=g+1):P=g-1}const b=Math.round(u*1.2),f=R.current;(f.textSize!==u||f.titleSize!==b||f.minCardWidth!==x||f.containerHeight!==m)&&(R.current={textSize:u,titleSize:b,minCardWidth:x,containerHeight:m},t.style.setProperty("--group-text-size",`${u}px`),t.style.setProperty("--group-title-size",`${b}px`),t.style.setProperty("--group-card-min",`${x}px`))},p=()=>{cancelAnimationFrame(a),a=requestAnimationFrame(o)};p();const v=new ResizeObserver(p);return v.observe(t),v.observe(s),()=>{cancelAnimationFrame(a),v.disconnect()}},[c,i]);const W=t=>{const r=t.target.files?.[0];if(r){const s=new FileReader;s.onload=a=>{const o=a.target?.result;w(o)},s.readAsText(r)}},A=()=>{const t=y.split(`
`).map(a=>a.trim()).filter(a=>a);if(t.length===0||d<=0){N([]);return}const r=[...t].sort(()=>Math.random()-.5),s=[];if(j==="byCount"){const a=Math.max(1,Math.min(d,t.length));for(let o=0;o<a;o++)s.push([]);r.forEach((o,p)=>{s[p%a].push(o)})}else{const a=Math.max(1,d);for(let o=0;o<r.length;o+=a)s.push(r.slice(o,o+a))}N(s)};return e.jsxs("div",{className:"group-generator-widget",children:[e.jsxs("div",{className:"input-panel",children:[e.jsx("label",{className:"panel-label",children:n("widgets.group_generator.student_list_label")}),e.jsx("textarea",{value:y,onChange:t=>w(t.target.value),placeholder:n("widgets.group_generator.placeholder")}),e.jsxs("button",{onClick:()=>z.current?.click(),className:"upload-button",children:[e.jsx(D,{size:16})," ",n("widgets.group_generator.load_from_file")]}),e.jsx("input",{type:"file",ref:z,onChange:W,accept:".txt",className:"hidden"})]}),e.jsxs("div",{className:"controls-panel",children:[e.jsxs("div",{className:"mode-selection",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"mode",checked:j==="byCount",onChange:()=>C("byCount")}),n("widgets.group_generator.number_of_groups")]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"mode",checked:j==="bySize",onChange:()=>C("bySize")}),n("widgets.group_generator.students_per_group")]})]}),e.jsx("input",{type:"number",value:d,onChange:t=>$(Math.max(1,parseInt(t.target.value)||1)),className:"group-value-input",min:"1"}),e.jsx("button",{onClick:A,className:"generate-button",children:n("widgets.group_generator.generate_groups")})]}),e.jsxs("div",{className:"output-panel",children:[e.jsxs("div",{className:"output-header",children:[e.jsx("label",{className:"panel-label",children:n("widgets.group_generator.generated_groups_label")}),e.jsxs("button",{className:"expand-button",onClick:()=>_(!c),disabled:i.length===0,children:[c?e.jsx(T,{size:16}):e.jsx(J,{size:16}),e.jsx("span",{children:n(c?"widgets.group_generator.close_large_view":"widgets.group_generator.view_large")})]})]}),e.jsx("div",{className:"groups-container",children:i.length>0?i.map((t,r)=>e.jsxs("div",{className:"group-card",children:[e.jsx("h4",{className:"group-title",children:n("widgets.group_generator.group_title",{number:r+1})}),e.jsx("ul",{children:t.map(s=>e.jsx("li",{children:s},s))})]},r)):e.jsx("p",{className:"no-groups-message",children:n("widgets.group_generator.no_groups_message")})})]}),c&&e.jsx("div",{className:"groups-overlay",onClick:()=>_(!1),children:e.jsxs("div",{className:"groups-overlay-content",ref:M,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"groups-overlay-header",ref:S,children:[e.jsx("h3",{children:n("widgets.group_generator.generated_groups_label")}),e.jsxs("button",{className:"expand-button",onClick:()=>_(!1),children:[e.jsx(T,{size:16}),e.jsx("span",{children:n("widgets.group_generator.close_large_view")})]})]}),e.jsx("div",{className:"groups-container groups-container-large",ref:G,children:i.length>0?i.map((t,r)=>e.jsxs("div",{className:"group-card group-card-large",children:[e.jsx("h4",{className:"group-title",children:n("widgets.group_generator.group_title",{number:r+1})}),e.jsx("ul",{children:t.map(s=>e.jsx("li",{children:s},s))})]},r)):e.jsx("p",{className:"no-groups-message",children:n("widgets.group_generator.no_groups_message")})})]})})]})};export{X as GroupGeneratorWidget,ee as widgetConfig};
