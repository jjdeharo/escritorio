import{r as i,j as e}from"./vendor-react-CvxLrFbY.js";import{z as K}from"./index-BRUjA2Tl.js";import{ae as v,af as g}from"./vendor-lucide-react-CYRm5Z9O.js";import"./vendor-clsx-DMbM62ou.js";import"./vendor-react-dom-ovwEKgq_.js";import"./vendor-scheduler-SPyfQU6S.js";import"./vendor-i18next-http-backend-BlWUewvL.js";import"./vendor-react-i18next-CV9wn5jO.js";import"./vendor-html-parse-stringify-C3VvPRF8.js";import"./vendor-void-elements-SshaXqDN.js";import"./vendor-react-rnd-CJIym3is.js";import"./vendor-react-draggable-CHzIUO8G.js";import"./vendor-prop-types-Chjiymov.js";import"./vendor-re-resizable-Bd8fNV1d.js";import"./vendor-dnd-kit-core-C4pUYSBz.js";import"./vendor-dnd-kit-utilities-CZrAEsTl.js";import"./vendor-dnd-kit-accessibility-DKV5GxcV.js";import"./vendor-dnd-kit-sortable-BobZZm17.js";import"./vendor-fflate-PjZAcS34.js";import"./vendor-framer-motion-FfyGqyL8.js";import"./vendor-motion-dom-DtvSSoo0.js";import"./vendor-motion-utils-CjIqCkNq.js";import"./vendor-i18next-Bvlggjj8.js";import"./vendor-i18next-browser-languagedetector-OJKzRF51.js";const F=()=>{const[r,b]=i.useState(!1),[l,f]=i.useState(120),[a,p]=i.useState(4),[m,d]=i.useState(0),u=i.useRef(null),c=i.useRef(null),x=o=>{if(!u.current){const h=window.AudioContext||window.webkitAudioContext;u.current=new h}const t=u.current,s=t.createOscillator(),n=t.createGain();s.type="sine",s.frequency.setValueAtTime(o?900:600,t.currentTime),n.gain.setValueAtTime(1,t.currentTime),n.gain.exponentialRampToValueAtTime(.001,t.currentTime+.05),s.connect(n),n.connect(t.destination),s.start(t.currentTime),s.stop(t.currentTime+.05)};i.useEffect(()=>{if(r){const o=60/l*1e3,t=()=>{d(s=>{const n=(s+1)%a;return x(n===0),n})};x(m===0),c.current=window.setInterval(t,o)}else c.current&&clearInterval(c.current),d(0);return()=>{c.current&&clearInterval(c.current)}},[r,l,a]);const j=()=>{b(!r)};return e.jsxs("div",{className:"metronome-widget",children:[e.jsxs("div",{className:"bpm-display",children:[e.jsx("span",{className:"bpm-value",children:l}),e.jsx("span",{className:"bpm-label",children:"BPM"})]}),e.jsx("div",{className:"bpm-slider",children:e.jsx("input",{type:"range",min:"40",max:"240",value:l,onChange:o=>f(Number(o.target.value)),disabled:r})}),e.jsx("div",{className:"beat-indicators",children:Array.from({length:a},(o,t)=>e.jsx("div",{className:`beat-dot ${r&&m===t?"active":""} ${r&&m===t&&t===0?"first-beat":""}`},t))}),e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"measure-control",children:[e.jsx("button",{onClick:()=>p(Math.max(1,a-1)),disabled:r,children:"-"}),e.jsxs("span",{children:[a,"/4"]}),e.jsx("button",{onClick:()=>p(Math.min(12,a+1)),disabled:r,children:"+"})]}),e.jsx("button",{onClick:j,className:"play-button",children:r?e.jsx(v,{size:32}):e.jsx(g,{size:32})})]})]})};export{F as MetronomeWidget,K as widgetConfig};
