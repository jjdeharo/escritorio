import{c as _,u as b,r as u,j as t,b as k}from"./index-Drqpmo9T.js";import{a1 as E}from"./index-Drqpmo9T.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],N=_("shuffle",M),P=(n,a)=>{let f=0;const e=n.filter(r=>r!==a*a-1);for(let r=0;r<e.length-1;r++)for(let c=r+1;c<e.length;c++)e[r]>e[c]&&f++;if(a%2===1)return f%2===0;{const r=a-Math.floor(n.indexOf(a*a-1)/a);return(f+r)%2!==0}},$=()=>{const{t:n}=b(),[a,f]=u.useState(null),[e,r]=u.useState(3),[c,p]=u.useState([]),[h,g]=u.useState(!1),m=()=>{const s=e*e,l=Array.from({length:s},(o,d)=>d);let i;do i=[...l].sort(()=>Math.random()-.5);while(!P(i,e)||i.every((o,d)=>o===d));p(i),g(!1)};u.useEffect(()=>{a&&m()},[a,e]),u.useEffect(()=>{if(c.length===0)return;const s=c.every((l,i)=>l===i);g(s)},[c]);const y=s=>{if(s.target.files&&s.target.files[0]){const l=new FileReader;l.onload=i=>{f(i.target?.result)},l.readAsDataURL(s.target.files[0])}},w=s=>{if(h)return;const l=c.indexOf(e*e-1);if(((o,d)=>{const z=Math.floor(o/e),v=o%e,x=Math.floor(d/e),j=d%e;return z===x&&Math.abs(v-j)===1||v===j&&Math.abs(z-x)===1})(s,l)){const o=[...c];[o[s],o[l]]=[o[l],o[s]],p(o)}};return a?t.jsxs("div",{className:"sliding-puzzle-widget",children:[t.jsxs("div",{className:"puzzle-board",style:{gridTemplateColumns:`repeat(${e}, 1fr)`},children:[c.map((s,l)=>{const i=s===e*e-1,o=s%e,d=Math.floor(s/e);return t.jsx("div",{className:`puzzle-piece ${i?"empty":""}`,onClick:()=>w(l),children:!i&&t.jsx("div",{className:"piece-image",style:{backgroundImage:`url(${a})`,backgroundSize:`${e*100}% ${e*100}%`,backgroundPosition:`${o*100/(e-1)}% ${d*100/(e-1)}%`}})},l)}),h&&t.jsx("div",{className:"solved-overlay",children:n("widgets.sliding_puzzle.solved_overlay")})]}),t.jsxs("div",{className:"puzzle-controls",children:[t.jsxs("label",{children:[n("widgets.sliding_puzzle.complexity_label"),t.jsxs("select",{value:e,onChange:s=>r(Number(s.target.value)),children:[t.jsx("option",{value:3,children:n("widgets.sliding_puzzle.difficulty.easy")}),t.jsx("option",{value:4,children:n("widgets.sliding_puzzle.difficulty.normal")}),t.jsx("option",{value:5,children:n("widgets.sliding_puzzle.difficulty.hard")})]})]}),t.jsxs("button",{onClick:m,children:[t.jsx(N,{size:16})," ",n("widgets.sliding_puzzle.shuffle_button")]})]})]}):t.jsxs("div",{className:"puzzle-placeholder",children:[t.jsx(k,{size:48}),t.jsx("p",{children:n("widgets.sliding_puzzle.upload_prompt")}),t.jsx("input",{type:"file",accept:"image/*",onChange:y})]})};export{$ as SlidingPuzzleWidget,E as widgetConfig};
