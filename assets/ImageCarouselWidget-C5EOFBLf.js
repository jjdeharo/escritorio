import{r as l,j as e}from"./vendor-react-CvxLrFbY.js";import{u as k}from"./index-BRUjA2Tl.js";import{t as ee}from"./index-BRUjA2Tl.js";import{u as C}from"./vendor-react-i18next-CV9wn5jO.js";import{I as N,w as x,O as _,Q as y}from"./vendor-lucide-react-CYRm5Z9O.js";import"./vendor-clsx-DMbM62ou.js";import"./vendor-react-dom-ovwEKgq_.js";import"./vendor-scheduler-SPyfQU6S.js";import"./vendor-i18next-http-backend-BlWUewvL.js";import"./vendor-react-rnd-CJIym3is.js";import"./vendor-react-draggable-CHzIUO8G.js";import"./vendor-prop-types-Chjiymov.js";import"./vendor-re-resizable-Bd8fNV1d.js";import"./vendor-dnd-kit-core-C4pUYSBz.js";import"./vendor-dnd-kit-utilities-CZrAEsTl.js";import"./vendor-dnd-kit-accessibility-DKV5GxcV.js";import"./vendor-dnd-kit-sortable-BobZZm17.js";import"./vendor-fflate-PjZAcS34.js";import"./vendor-framer-motion-FfyGqyL8.js";import"./vendor-motion-dom-DtvSSoo0.js";import"./vendor-motion-utils-CjIqCkNq.js";import"./vendor-i18next-Bvlggjj8.js";import"./vendor-i18next-browser-languagedetector-OJKzRF51.js";import"./vendor-html-parse-stringify-C3VvPRF8.js";import"./vendor-void-elements-SshaXqDN.js";const X=()=>{const{t:n}=C(),[s,f]=k("image-carousel-images",[]),[r,c]=l.useState(0),a=l.useRef(null),w=o=>{const t=o.target.files;if(console.log("Files selected:",t?.length),!t||t.length===0)return;const u=[];for(let i=0;i<t.length;i++){const m=t[i];if(console.log("Processing file:",m.name,"type:",m.type),m.type.startsWith("image/")){const j=new Promise((v,b)=>{const p=new FileReader;p.onload=h=>v(h.target?.result),p.onerror=h=>b(h),p.readAsDataURL(m)});u.push(j)}}console.log("Image promises created:",u.length),Promise.all(u).then(i=>{console.log("Images loaded successfully:",i.length),console.log("Setting images to:",i),f(i),c(0),a.current&&(a.current.value="")}).catch(i=>{console.error("Error loading images:",i)})},g=l.useCallback(()=>{if(s.length<=1)return;const t=r===0?s.length-1:r-1;c(t)},[r,s.length]),d=l.useCallback(()=>{if(s.length<=1)return;const t=r===s.length-1?0:r+1;c(t)},[r,s.length]);return l.useEffect(()=>{const o=t=>{if(s.length!==0)switch(t.key){case"ArrowLeft":t.preventDefault(),g();break;case"ArrowRight":t.preventDefault(),d();break}};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s.length,g,d]),console.log("Current render state - images.length:",s.length,"currentIndex:",r),e.jsxs("div",{className:"image-carousel-widget",children:[s.length===0?e.jsxs("div",{className:"placeholder-view",children:[e.jsx(N,{size:64,className:"text-gray-400"}),e.jsx("p",{className:"mt-4 text-center",children:n("widgets.image_carousel.no_images")}),e.jsxs("button",{onClick:()=>a.current?.click(),className:"upload-button",children:[e.jsx(x,{size:18}),n("widgets.image_carousel.select_images")]})]}):e.jsxs("div",{className:"carousel-view",children:[e.jsxs("div",{className:"carousel-image-container",children:[e.jsx("img",{src:s[r],alt:n("widgets.image_carousel.slide_alt",{number:r+1})}),e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",background:"rgba(0,0,0,0.7)",color:"white",padding:"5px",borderRadius:"3px"},children:[r+1," / ",s.length,s.length===1&&e.jsx("div",{style:{fontSize:"12px",marginTop:"3px"},children:n("widgets.image_carousel.more_images_hint")})]})]}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"carousel-arrow left-arrow",onClick:g,children:e.jsx(_,{size:32})}),e.jsx("button",{className:"carousel-arrow right-arrow",onClick:d,children:e.jsx(y,{size:32})})]}),s.length>1&&e.jsx("div",{className:"slide-indicators",children:s.map((o,t)=>e.jsx("div",{className:`indicator-dot ${r===t?"active":""}`,onClick:()=>c(t)},t))}),e.jsx("button",{onClick:()=>a.current?.click(),className:"change-images-button",title:n("widgets.image_carousel.select_new_images"),children:e.jsx(x,{size:16})})]}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",ref:a,onChange:w,className:"hidden"})]})};export{X as ImageCarouselWidget,ee as widgetConfig};
