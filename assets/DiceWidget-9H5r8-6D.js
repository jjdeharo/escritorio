import{r as o,j as e}from"./vendor-react-CvxLrFbY.js";import{e as U}from"./index-BRUjA2Tl.js";import{u as b}from"./vendor-react-i18next-CV9wn5jO.js";import{V as N,r as D}from"./vendor-lucide-react-CYRm5Z9O.js";import"./vendor-clsx-DMbM62ou.js";import"./vendor-react-dom-ovwEKgq_.js";import"./vendor-scheduler-SPyfQU6S.js";import"./vendor-i18next-http-backend-BlWUewvL.js";import"./vendor-react-rnd-CJIym3is.js";import"./vendor-react-draggable-CHzIUO8G.js";import"./vendor-prop-types-Chjiymov.js";import"./vendor-re-resizable-Bd8fNV1d.js";import"./vendor-dnd-kit-core-C4pUYSBz.js";import"./vendor-dnd-kit-utilities-CZrAEsTl.js";import"./vendor-dnd-kit-accessibility-DKV5GxcV.js";import"./vendor-dnd-kit-sortable-BobZZm17.js";import"./vendor-fflate-PjZAcS34.js";import"./vendor-framer-motion-FfyGqyL8.js";import"./vendor-motion-dom-DtvSSoo0.js";import"./vendor-motion-utils-CjIqCkNq.js";import"./vendor-i18next-Bvlggjj8.js";import"./vendor-i18next-browser-languagedetector-OJKzRF51.js";import"./vendor-html-parse-stringify-C3VvPRF8.js";import"./vendor-void-elements-SshaXqDN.js";const L=()=>{const{t:a}=b(),[c,f]=o.useState(2),[g,m]=o.useState([]),[d,u]=o.useState(0),[s,p]=o.useState(!1),l=o.useRef(null);o.useEffect(()=>{l.current=new Audio("/sounds/dice-142528.mp3")},[]);const x=()=>{if(s||!l.current)return;p(!0),l.current.currentTime=0,l.current.play().catch(i=>{console.error("Error al reproducir el audio:",i)});const t=Array.from({length:c},(i,r)=>({id:r,value:Math.floor(Math.random()*6)+1,isRolling:!0}));m(t),u(0),setTimeout(()=>{let i=0;const r=t.map(n=>(i+=n.value,{...n,isRolling:!1}));m(r),u(i),p(!1)},1500)},h=t=>{if(s)return;const i=parseInt(t.target.value,10);i>0&&i<=10&&f(i)},j=({value:t,isRolling:i})=>{const r=n=>e.jsx("div",{className:`face face-${n}`,children:Array.from({length:n}).map((R,v)=>e.jsx("span",{className:"dot"},v))});return e.jsx("div",{className:"die-scene",children:e.jsxs("div",{className:`die-3d ${i?"rolling":`show-${t}`}`,children:[r(1),r(2),r(3),r(4),r(5),r(6)]})})};return e.jsxs("div",{className:"dice-widget",children:[e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"dice-selector",children:[e.jsx("label",{htmlFor:"num-dice-input",children:a("widgets.dice.num_dice")}),e.jsx("input",{id:"num-dice-input",type:"number",value:c,onChange:h,min:"1",max:"10",disabled:s})]}),e.jsxs("button",{onClick:x,className:"roll-button",disabled:s,children:[e.jsx(N,{size:20}),a(s?"widgets.dice.rolling":"widgets.dice.roll_dice")]})]}),e.jsx("div",{className:"dice-container",children:g.map(t=>e.jsx(j,{value:t.value,isRolling:t.isRolling},t.id))}),!s&&d>0&&e.jsxs("div",{className:"total",children:[a("widgets.dice.total")," ",e.jsx("span",{children:d})]}),e.jsx("a",{href:"https://pixabay.com/users/u_qpfzpydtro-29496424/?utm_source=link-attribution&utm_medium=referral",target:"_blank",rel:"noopener noreferrer",className:"attribution-button",title:"Sound Effect by u_qpfzpydtro from Pixabay",onClick:t=>t.stopPropagation(),children:e.jsx(D,{size:12})})]})};export{L as DiceWidget,U as widgetConfig};
