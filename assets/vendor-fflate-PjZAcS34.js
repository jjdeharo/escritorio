var m=Uint8Array,N=Uint16Array,Tr=Int32Array,gr=new m([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cr=new m([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cr=new m([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kr=function(n,r){for(var e=new N(31),a=0;a<31;++a)e[a]=r+=1<<n[a-1];for(var t=new Tr(e[30]),a=1;a<30;++a)for(var i=e[a];i<e[a+1];++i)t[i]=i-e[a]<<5|a;return{b:e,r:t}},qr=kr(gr,2),Hr=qr.b,mr=qr.r;Hr[28]=258,mr[258]=28;var Or=kr(cr,0),Jr=Or.b,Dr=Or.r,pr=new N(32768);for(var M=0;M<32768;++M){var _=(M&43690)>>1|(M&21845)<<1;_=(_&52428)>>2|(_&13107)<<2,_=(_&61680)>>4|(_&3855)<<4,pr[M]=((_&65280)>>8|(_&255)<<8)>>1}var $=function(n,r,e){for(var a=n.length,t=0,i=new N(r);t<a;++t)n[t]&&++i[n[t]-1];var f=new N(r);for(t=1;t<r;++t)f[t]=f[t-1]+i[t-1]<<1;var h;if(e){h=new N(1<<r);var s=15-r;for(t=0;t<a;++t)if(n[t])for(var u=t<<4|n[t],v=r-n[t],o=f[n[t]-1]++<<v,l=o|(1<<v)-1;o<=l;++o)h[pr[o]>>s]=u}else for(h=new N(a),t=0;t<a;++t)n[t]&&(h[t]=pr[f[n[t]-1]++]>>15-n[t]);return h},d=new m(288);for(var M=0;M<144;++M)d[M]=8;for(var M=144;M<256;++M)d[M]=9;for(var M=256;M<280;++M)d[M]=7;for(var M=280;M<288;++M)d[M]=8;var or=new m(32);for(var M=0;M<32;++M)or[M]=5;var Kr=$(d,9,0),Nr=$(d,9,1),Qr=$(or,5,0),Rr=$(or,5,1),yr=function(n){for(var r=n[0],e=1;e<n.length;++e)n[e]>r&&(r=n[e]);return r},R=function(n,r,e){var a=r/8|0;return(n[a]|n[a+1]<<8)>>(r&7)&e},zr=function(n,r){var e=r/8|0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>(r&7)},Ar=function(n){return(n+7)/8|0},sr=function(n,r,e){return(r==null||r<0)&&(r=0),(e==null||e>n.length)&&(e=n.length),new m(n.subarray(r,e))},Vr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],p=function(n,r,e){var a=new Error(r||Vr[n]);if(a.code=n,Error.captureStackTrace&&Error.captureStackTrace(a,p),!e)throw a;return a},Wr=function(n,r,e,a){var t=n.length,i=a?a.length:0;if(!t||r.f&&!r.l)return e||new m(0);var f=!e,h=f||r.i!=2,s=r.i;f&&(e=new m(t*3));var u=function(tr){var ir=e.length;if(tr>ir){var er=new m(Math.max(ir*2,tr));er.set(e),e=er}},v=r.f||0,o=r.p||0,l=r.b||0,c=r.l,x=r.d,w=r.m,y=r.n,D=t*8;do{if(!c){v=R(n,o,1);var Z=R(n,o+1,3);if(o+=3,Z)if(Z==1)c=Nr,x=Rr,w=9,y=5;else if(Z==2){var H=R(n,o,31)+257,B=R(n,o+10,15)+4,z=H+R(n,o+5,31)+1;o+=14;for(var g=new m(z),E=new m(19),A=0;A<B;++A)E[Cr[A]]=R(n,o+A*3,7);o+=B*3;for(var k=yr(E),b=(1<<k)-1,G=$(E,k,1),A=0;A<z;){var O=G[R(n,o,b)];o+=O&15;var C=O>>4;if(C<16)g[A++]=C;else{var U=0,F=0;for(C==16?(F=3+R(n,o,3),o+=2,U=g[A-1]):C==17?(F=3+R(n,o,7),o+=3):C==18&&(F=11+R(n,o,127),o+=7);F--;)g[A++]=U}}var Y=g.subarray(0,H),I=g.subarray(H);w=yr(Y),y=yr(I),c=$(Y,w,1),x=$(I,y,1)}else p(1);else{var C=Ar(o)+4,q=n[C-4]|n[C-3]<<8,P=C+q;if(P>t){s&&p(0);break}h&&u(l+q),e.set(n.subarray(C,P),l),r.b=l+=q,r.p=o=P*8,r.f=v;continue}if(o>D){s&&p(0);break}}h&&u(l+131072);for(var ar=(1<<w)-1,Q=(1<<y)-1,L=o;;L=o){var U=c[zr(n,o)&ar],J=U>>4;if(o+=U&15,o>D){s&&p(0);break}if(U||p(2),J<256)e[l++]=J;else if(J==256){L=o,c=null;break}else{var K=J-254;if(J>264){var A=J-257,S=gr[A];K=R(n,o,(1<<S)-1)+Hr[A],o+=S}var W=x[zr(n,o)&Q],rr=W>>4;W||p(3),o+=W&15;var I=Jr[rr];if(rr>3){var S=cr[rr];I+=zr(n,o)&(1<<S)-1,o+=S}if(o>D){s&&p(0);break}h&&u(l+131072);var nr=l+K;if(l<I){var hr=i-I,lr=Math.min(I,nr);for(hr+l<0&&p(3);l<lr;++l)e[l]=a[hr+l]}for(;l<nr;++l)e[l]=e[l-I]}}r.l=c,r.p=L,r.b=l,r.f=v,c&&(v=1,r.m=w,r.d=x,r.n=y)}while(!v);return l!=e.length&&f?sr(e,0,l):e.subarray(0,l)},j=function(n,r,e){e<<=r&7;var a=r/8|0;n[a]|=e,n[a+1]|=e>>8},fr=function(n,r,e){e<<=r&7;var a=r/8|0;n[a]|=e,n[a+1]|=e>>8,n[a+2]|=e>>16},xr=function(n,r){for(var e=[],a=0;a<n.length;++a)n[a]&&e.push({s:a,f:n[a]});var t=e.length,i=e.slice();if(!t)return{t:Gr,l:0};if(t==1){var f=new m(e[0].s+1);return f[e[0].s]=1,{t:f,l:1}}e.sort(function(P,H){return P.f-H.f}),e.push({s:-1,f:25001});var h=e[0],s=e[1],u=0,v=1,o=2;for(e[0]={s:-1,f:h.f+s.f,l:h,r:s};v!=t-1;)h=e[e[u].f<e[o].f?u++:o++],s=e[u!=v&&e[u].f<e[o].f?u++:o++],e[v++]={s:-1,f:h.f+s.f,l:h,r:s};for(var l=i[0].s,a=1;a<t;++a)i[a].s>l&&(l=i[a].s);var c=new N(l+1),x=Fr(e[v-1],c,0);if(x>r){var a=0,w=0,y=x-r,D=1<<y;for(i.sort(function(H,B){return c[B.s]-c[H.s]||H.f-B.f});a<t;++a){var Z=i[a].s;if(c[Z]>r)w+=D-(1<<x-c[Z]),c[Z]=r;else break}for(w>>=y;w>0;){var C=i[a].s;c[C]<r?w-=1<<r-c[C]++-1:++a}for(;a>=0&&w;--a){var q=i[a].s;c[q]==r&&(--c[q],++w)}x=r}return{t:new m(c),l:x}},Fr=function(n,r,e){return n.s==-1?Math.max(Fr(n.l,r,e+1),Fr(n.r,r,e+1)):r[n.s]=e},Zr=function(n){for(var r=n.length;r&&!n[--r];);for(var e=new N(++r),a=0,t=n[0],i=1,f=function(s){e[a++]=s},h=1;h<=r;++h)if(n[h]==t&&h!=r)++i;else{if(!t&&i>2){for(;i>138;i-=138)f(32754);i>2&&(f(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(f(t),--i;i>6;i-=6)f(8304);i>2&&(f(i-3<<5|8208),i=0)}for(;i--;)f(t);i=1,t=n[h]}return{c:e.subarray(0,a),n:r}},vr=function(n,r){for(var e=0,a=0;a<r.length;++a)e+=n[a]*r[a];return e},Yr=function(n,r,e){var a=e.length,t=Ar(r+2);n[t]=a&255,n[t+1]=a>>8,n[t+2]=n[t]^255,n[t+3]=n[t+1]^255;for(var i=0;i<a;++i)n[t+i+4]=e[i];return(t+4+a)*8},Br=function(n,r,e,a,t,i,f,h,s,u,v){j(r,v++,e),++t[256];for(var o=xr(t,15),l=o.t,c=o.l,x=xr(i,15),w=x.t,y=x.l,D=Zr(l),Z=D.c,C=D.n,q=Zr(w),P=q.c,H=q.n,B=new N(19),z=0;z<Z.length;++z)++B[Z[z]&31];for(var z=0;z<P.length;++z)++B[P[z]&31];for(var g=xr(B,7),E=g.t,A=g.l,k=19;k>4&&!E[Cr[k-1]];--k);var b=u+5<<3,G=vr(t,d)+vr(i,or)+f,O=vr(t,l)+vr(i,w)+f+14+3*k+vr(B,E)+2*B[16]+3*B[17]+7*B[18];if(s>=0&&b<=G&&b<=O)return Yr(r,v,n.subarray(s,s+u));var U,F,Y,I;if(j(r,v,1+(O<G)),v+=2,O<G){U=$(l,c,0),F=l,Y=$(w,y,0),I=w;var ar=$(E,A,0);j(r,v,C-257),j(r,v+5,H-1),j(r,v+10,k-4),v+=14;for(var z=0;z<k;++z)j(r,v+3*z,E[Cr[z]]);v+=3*k;for(var Q=[Z,P],L=0;L<2;++L)for(var J=Q[L],z=0;z<J.length;++z){var K=J[z]&31;j(r,v,ar[K]),v+=E[K],K>15&&(j(r,v,J[z]>>5&127),v+=J[z]>>12)}}else U=Kr,F=d,Y=Qr,I=or;for(var z=0;z<h;++z){var S=a[z];if(S>255){var K=S>>18&31;fr(r,v,U[K+257]),v+=F[K+257],K>7&&(j(r,v,S>>23&31),v+=gr[K]);var W=S&31;fr(r,v,Y[W]),v+=I[W],W>3&&(fr(r,v,S>>5&8191),v+=cr[W])}else fr(r,v,U[S]),v+=F[S]}return fr(r,v,U[256]),v+F[256]},Xr=new Tr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gr=new m(0),$r=function(n,r,e,a,t,i){var f=i.z||n.length,h=new m(a+f+5*(1+Math.ceil(f/7e3))+t),s=h.subarray(a,h.length-t),u=i.l,v=(i.r||0)&7;if(r){v&&(s[0]=i.r>>3);for(var o=Xr[r-1],l=o>>13,c=o&8191,x=(1<<e)-1,w=i.p||new N(32768),y=i.h||new N(x+1),D=Math.ceil(e/3),Z=2*D,C=function(wr){return(n[wr]^n[wr+1]<<D^n[wr+2]<<Z)&x},q=new Tr(25e3),P=new N(288),H=new N(32),B=0,z=0,g=i.i||0,E=0,A=i.w||0,k=0;g+2<f;++g){var b=C(g),G=g&32767,O=y[b];if(w[G]=O,y[b]=G,A<=g){var U=f-g;if((B>7e3||E>24576)&&(U>423||!u)){v=Br(n,s,0,q,P,H,z,E,k,g-k,v),E=B=z=0,k=g;for(var F=0;F<286;++F)P[F]=0;for(var F=0;F<30;++F)H[F]=0}var Y=2,I=0,ar=c,Q=G-O&32767;if(U>2&&b==C(g-Q))for(var L=Math.min(l,U)-1,J=Math.min(32767,g),K=Math.min(258,U);Q<=J&&--ar&&G!=O;){if(n[g+Y]==n[g+Y-Q]){for(var S=0;S<K&&n[g+S]==n[g+S-Q];++S);if(S>Y){if(Y=S,I=Q,S>L)break;for(var W=Math.min(Q,S-2),rr=0,F=0;F<W;++F){var nr=g-Q+F&32767,hr=w[nr],lr=nr-hr&32767;lr>rr&&(rr=lr,O=nr)}}}G=O,O=w[G],Q+=G-O&32767}if(I){q[E++]=268435456|mr[Y]<<18|Dr[I];var tr=mr[Y]&31,ir=Dr[I]&31;z+=gr[tr]+cr[ir],++P[257+tr],++H[ir],A=g+Y,++B}else q[E++]=n[g],++P[n[g]]}}for(g=Math.max(g,A);g<f;++g)q[E++]=n[g],++P[n[g]];v=Br(n,s,u,q,P,H,z,E,k,g-k,v),u||(i.r=v&7|s[v/8|0]<<3,v-=7,i.h=y,i.p=w,i.i=g,i.w=A)}else{for(var g=i.w||0;g<f+u;g+=65535){var er=g+65535;er>=f&&(s[v/8|0]=u,er=f),v=Yr(s,v+1,n.subarray(g,er))}i.i=f}return sr(h,0,a+Ar(v)+t)},Lr=function(){for(var n=new Int32Array(256),r=0;r<256;++r){for(var e=r,a=9;--a;)e=(e&1&&-306674912)^e>>>1;n[r]=e}return n}(),jr=function(){var n=-1;return{p:function(r){for(var e=n,a=0;a<r.length;++a)e=Lr[e&255^r[a]]^e>>>8;n=e},d:function(){return~n}}},br=function(n,r,e,a,t){if(!t&&(t={l:1},r.dictionary)){var i=r.dictionary.subarray(-32768),f=new m(i.length+n.length);f.set(i),f.set(n,i.length),n=f,t.w=i.length}return $r(n,r.level==null?6:r.level,r.mem==null?t.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+r.mem,e,a,t)},_r=function(n,r){var e={};for(var a in n)e[a]=n[a];for(var a in r)e[a]=r[a];return e},X=function(n,r){return n[r]|n[r+1]<<8},V=function(n,r){return(n[r]|n[r+1]<<8|n[r+2]<<16|n[r+3]<<24)>>>0},Mr=function(n,r){return V(n,r)+V(n,r+4)*4294967296},T=function(n,r,e){for(;e;++r)n[r]=e,e>>>=8},dr=function(){function n(r,e){if(typeof r=="function"&&(e=r,r={}),this.ondata=e,this.o=r||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new m(98304),this.o.dictionary){var a=this.o.dictionary.subarray(-32768);this.b.set(a,32768-a.length),this.s.i=32768-a.length}}return n.prototype.p=function(r,e){this.ondata(br(r,this.o,0,0,this.s),e)},n.prototype.push=function(r,e){this.ondata||p(5),this.s.l&&p(4);var a=r.length+this.s.z;if(a>this.b.length){if(a>2*this.b.length-32768){var t=new m(a&-32768);t.set(this.b.subarray(0,this.s.z)),this.b=t}var i=this.b.length-this.s.z;this.b.set(r.subarray(0,i),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(r.subarray(i),32768),this.s.z=r.length-i+32768,this.s.i=32766,this.s.w=32768}else this.b.set(r,this.s.z),this.s.z+=r.length;this.s.l=e&1,(this.s.z>this.s.w+8191||e)&&(this.p(this.b,e||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||p(5),this.s.l&&p(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function rn(n,r){return Wr(n,{i:2},r&&r.out,r&&r.dictionary)}var Er=typeof TextEncoder<"u"&&new TextEncoder,Sr=typeof TextDecoder<"u"&&new TextDecoder,nn=0;try{Sr.decode(Gr,{stream:!0}),nn=1}catch{}var en=function(n){for(var r="",e=0;;){var a=n[e++],t=(a>127)+(a>223)+(a>239);if(e+t>n.length)return{s:r,r:sr(n,e-1)};t?t==3?(a=((a&15)<<18|(n[e++]&63)<<12|(n[e++]&63)<<6|n[e++]&63)-65536,r+=String.fromCharCode(55296|a>>10,56320|a&1023)):t&1?r+=String.fromCharCode((a&31)<<6|n[e++]&63):r+=String.fromCharCode((a&15)<<12|(n[e++]&63)<<6|n[e++]&63):r+=String.fromCharCode(a)}};function Ur(n,r){var e;if(Er)return Er.encode(n);for(var a=n.length,t=new m(n.length+(n.length>>1)),i=0,f=function(u){t[i++]=u},e=0;e<a;++e){if(i+5>t.length){var h=new m(i+8+(a-e<<1));h.set(t),t=h}var s=n.charCodeAt(e);s<128||r?f(s):s<2048?(f(192|s>>6),f(128|s&63)):s>55295&&s<57344?(s=65536+(s&1047552)|n.charCodeAt(++e)&1023,f(240|s>>18),f(128|s>>12&63),f(128|s>>6&63),f(128|s&63)):(f(224|s>>12),f(128|s>>6&63),f(128|s&63))}return sr(t,0,i)}function an(n,r){if(r){for(var e="",a=0;a<n.length;a+=16384)e+=String.fromCharCode.apply(null,n.subarray(a,a+16384));return e}else{if(Sr)return Sr.decode(n);var t=en(n),i=t.s,e=t.r;return e.length&&p(8),i}}var tn=function(n){return n==1?3:n<6?2:n==9?1:0},fn=function(n,r){return r+30+X(n,r+26)+X(n,r+28)},vn=function(n,r,e){var a=X(n,r+28),t=an(n.subarray(r+46,r+46+a),!(X(n,r+8)&2048)),i=r+46+a,f=V(n,r+20),h=e&&f==4294967295?on(n,i):[f,V(n,r+24),V(n,r+42)],s=h[0],u=h[1],v=h[2];return[X(n,r+10),s,u,t,i+X(n,r+30)+X(n,r+32),v]},on=function(n,r){for(;X(n,r)!=1;r+=4+X(n,r+2));return[Mr(n,r+12),Mr(n,r+4),Mr(n,r+20)]},ur=function(n){var r=0;if(n)for(var e in n){var a=n[e].length;a>65535&&p(9),r+=a+4}return r},Ir=function(n,r,e,a,t,i,f,h){var s=a.length,u=e.extra,v=h&&h.length,o=ur(u);T(n,r,f!=null?33639248:67324752),r+=4,f!=null&&(n[r++]=20,n[r++]=e.os),n[r]=20,r+=2,n[r++]=e.flag<<1|(i<0&&8),n[r++]=t&&8,n[r++]=e.compression&255,n[r++]=e.compression>>8;var l=new Date(e.mtime==null?Date.now():e.mtime),c=l.getFullYear()-1980;if((c<0||c>119)&&p(10),T(n,r,c<<25|l.getMonth()+1<<21|l.getDate()<<16|l.getHours()<<11|l.getMinutes()<<5|l.getSeconds()>>1),r+=4,i!=-1&&(T(n,r,e.crc),T(n,r+4,i<0?-i-2:i),T(n,r+8,e.size)),T(n,r+12,s),T(n,r+14,o),r+=16,f!=null&&(T(n,r,v),T(n,r+6,e.attrs),T(n,r+10,f),r+=14),n.set(a,r),r+=s,o)for(var x in u){var w=u[x],y=w.length;T(n,r,+x),T(n,r+2,y),n.set(w,r+4),r+=4+y}return v&&(n.set(h,r),r+=v),r},sn=function(n,r,e,a,t){T(n,r,101010256),T(n,r+8,e),T(n,r+10,e),T(n,r+12,a),T(n,r+16,t)},Pr=function(){function n(r){this.filename=r,this.c=jr(),this.size=0,this.compression=0}return n.prototype.process=function(r,e){this.ondata(null,r,e)},n.prototype.push=function(r,e){this.ondata||p(5),this.c.p(r),this.size+=r.length,e&&(this.crc=this.c.d()),this.process(r,e||!1)},n}(),hn=function(){function n(r,e){var a=this;e||(e={}),Pr.call(this,r),this.d=new dr(e,function(t,i){a.ondata(null,t,i)}),this.compression=8,this.flag=tn(e.level)}return n.prototype.process=function(r,e){try{this.d.push(r,e)}catch(a){this.ondata(a,null,e)}},n.prototype.push=function(r,e){Pr.prototype.push.call(this,r,e)},n}(),ln=function(){function n(r){this.ondata=r,this.u=[],this.d=1}return n.prototype.add=function(r){var e=this;if(this.ondata||p(5),this.d&2)this.ondata(p(4+(this.d&1)*8,0,1),null,!1);else{var a=Ur(r.filename),t=a.length,i=r.comment,f=i&&Ur(i),h=t!=r.filename.length||f&&i.length!=f.length,s=t+ur(r.extra)+30;t>65535&&this.ondata(p(11,0,1),null,!1);var u=new m(s);Ir(u,0,r,a,h,-1);var v=[u],o=function(){for(var y=0,D=v;y<D.length;y++){var Z=D[y];e.ondata(null,Z,!1)}v=[]},l=this.d;this.d=0;var c=this.u.length,x=_r(r,{f:a,u:h,o:f,t:function(){r.terminate&&r.terminate()},r:function(){if(o(),l){var y=e.u[c+1];y?y.r():e.d=1}l=1}}),w=0;r.ondata=function(y,D,Z){if(y)e.ondata(y,D,Z),e.terminate();else if(w+=D.length,v.push(D),Z){var C=new m(16);T(C,0,134695760),T(C,4,r.crc),T(C,8,w),T(C,12,r.size),v.push(C),x.c=w,x.b=s+w+16,x.crc=r.crc,x.size=r.size,l&&x.r(),l=1}else l&&o()},this.u.push(x)}},n.prototype.end=function(){var r=this;if(this.d&2){this.ondata(p(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){r.d&1&&(r.u.splice(-1,1),r.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var r=0,e=0,a=0,t=0,i=this.u;t<i.length;t++){var f=i[t];a+=46+f.f.length+ur(f.extra)+(f.o?f.o.length:0)}for(var h=new m(a+22),s=0,u=this.u;s<u.length;s++){var f=u[s];Ir(h,r,f,f.f,f.u,-f.c-2,e,f.o),r+=46+f.f.length+ur(f.extra)+(f.o?f.o.length:0),e+=f.b}sn(h,r,this.u.length,a,e),this.ondata(null,h,!0),this.d=2},n.prototype.terminate=function(){for(var r=0,e=this.u;r<e.length;r++){var a=e[r];a.t()}this.d=2},n}();function un(n,r){for(var e={},a=n.length-22;V(n,a)!=101010256;--a)(!a||n.length-a>65558)&&p(13);var t=X(n,a+8);if(!t)return{};var i=V(n,a+16),f=i==4294967295||t==65535;if(f){var h=V(n,a-12);f=V(n,h)==101075792,f&&(t=V(n,h+32),i=V(n,h+48))}for(var s=0;s<t;++s){var u=vn(n,i,f),v=u[0],o=u[1],l=u[2],c=u[3],x=u[4],w=u[5],y=fn(n,w);i=x,v?v==8?e[c]=rn(n.subarray(y,y+o),{out:new m(l)}):p(14,"unknown compression type "+v):e[c]=sr(n,y,y+o)}return e}export{ln as Z,an as a,hn as b,Ur as s,un as u};
