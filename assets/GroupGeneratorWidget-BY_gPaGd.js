import{r as i,j as e}from"./vendor-react-CvxLrFbY.js";import{q as ve}from"./index-BRUjA2Tl.js";import{u as U}from"./vendor-react-i18next-CV9wn5jO.js";import{w as D,b as $,a7 as J}from"./vendor-lucide-react-CYRm5Z9O.js";import"./vendor-clsx-DMbM62ou.js";import"./vendor-react-dom-ovwEKgq_.js";import"./vendor-scheduler-SPyfQU6S.js";import"./vendor-i18next-http-backend-BlWUewvL.js";import"./vendor-react-rnd-CJIym3is.js";import"./vendor-react-draggable-CHzIUO8G.js";import"./vendor-prop-types-Chjiymov.js";import"./vendor-re-resizable-Bd8fNV1d.js";import"./vendor-dnd-kit-core-C4pUYSBz.js";import"./vendor-dnd-kit-utilities-CZrAEsTl.js";import"./vendor-dnd-kit-accessibility-DKV5GxcV.js";import"./vendor-dnd-kit-sortable-BobZZm17.js";import"./vendor-fflate-PjZAcS34.js";import"./vendor-framer-motion-FfyGqyL8.js";import"./vendor-motion-dom-DtvSSoo0.js";import"./vendor-motion-utils-CjIqCkNq.js";import"./vendor-i18next-Bvlggjj8.js";import"./vendor-i18next-browser-languagedetector-OJKzRF51.js";import"./vendor-html-parse-stringify-C3VvPRF8.js";import"./vendor-void-elements-SshaXqDN.js";const je=()=>{const{t:n}=U(),[y,w]=i.useState(`Ana
Beatriz
Carlos
Daniela
Esteban
Fernanda
Gael
Hilda
IvÃ¡n
Julia`),[j,C]=i.useState("byCount"),[g,E]=i.useState(3),[l,N]=i.useState([]),[p,_]=i.useState(!1),z=i.useRef(null),M=i.useRef(null),S=i.useRef(null),G=i.useRef(null),R=i.useRef({titleSize:0,textSize:0,minCardWidth:0,containerHeight:0});i.useEffect(()=>{if(!p)return;const t=M.current,s=S.current,r=G.current;if(!t||!s||!r)return;let o=0;const a=()=>{if(!t||!s||!r)return;const m=getComputedStyle(t),I=parseFloat(m.paddingTop)||0,L=parseFloat(m.paddingBottom)||0,V=parseFloat(m.rowGap||m.gap)||0,h=Math.max(120,t.clientHeight-s.offsetHeight-I-L-V);r.style.height=`${h}px`;const H=r.clientWidth,B=Math.max(1,l.length),q=Math.min(B,Math.max(1,Math.floor(H/320))),x=Math.max(240,Math.floor(H/q)-16),k=16,O=Math.min(40,Math.max(20,Math.floor(h/5)));let F=k,P=O,c=k;for(let T=0;T<12;T+=1){const u=Math.floor((F+P)/2);t.style.setProperty("--group-text-size",`${u}px`),t.style.setProperty("--group-title-size",`${Math.round(u*1.2)}px`),t.style.setProperty("--group-card-min",`${x}px`),r.scrollHeight<=r.clientHeight?(c=u,F=u+1):P=u-1}const v=Math.round(c*1.2),f=R.current;(f.textSize!==c||f.titleSize!==v||f.minCardWidth!==x||f.containerHeight!==h)&&(R.current={textSize:c,titleSize:v,minCardWidth:x,containerHeight:h},t.style.setProperty("--group-text-size",`${c}px`),t.style.setProperty("--group-title-size",`${v}px`),t.style.setProperty("--group-card-min",`${x}px`))},d=()=>{cancelAnimationFrame(o),o=requestAnimationFrame(a)};d();const b=new ResizeObserver(d);return b.observe(t),b.observe(r),()=>{cancelAnimationFrame(o),b.disconnect()}},[p,l]);const W=t=>{const s=t.target.files?.[0];if(s){const r=new FileReader;r.onload=o=>{const a=o.target?.result;w(a)},r.readAsText(s)}},A=()=>{const t=y.split(`
`).map(o=>o.trim()).filter(o=>o);if(t.length===0||g<=0){N([]);return}const s=[...t].sort(()=>Math.random()-.5),r=[];if(j==="byCount"){const o=Math.max(1,Math.min(g,t.length));for(let a=0;a<o;a++)r.push([]);s.forEach((a,d)=>{r[d%o].push(a)})}else{const o=Math.max(1,g);for(let a=0;a<s.length;a+=o)r.push(s.slice(a,a+o))}N(r)};return e.jsxs("div",{className:"group-generator-widget",children:[e.jsxs("div",{className:"input-panel",children:[e.jsx("label",{className:"panel-label",children:n("widgets.group_generator.student_list_label")}),e.jsx("textarea",{value:y,onChange:t=>w(t.target.value),placeholder:n("widgets.group_generator.placeholder")}),e.jsxs("button",{onClick:()=>z.current?.click(),className:"upload-button",children:[e.jsx(D,{size:16})," ",n("widgets.group_generator.load_from_file")]}),e.jsx("input",{type:"file",ref:z,onChange:W,accept:".txt",className:"hidden"})]}),e.jsxs("div",{className:"controls-panel",children:[e.jsxs("div",{className:"mode-selection",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"mode",checked:j==="byCount",onChange:()=>C("byCount")}),n("widgets.group_generator.number_of_groups")]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"mode",checked:j==="bySize",onChange:()=>C("bySize")}),n("widgets.group_generator.students_per_group")]})]}),e.jsx("input",{type:"number",value:g,onChange:t=>E(Math.max(1,parseInt(t.target.value)||1)),className:"group-value-input",min:"1"}),e.jsx("button",{onClick:A,className:"generate-button",children:n("widgets.group_generator.generate_groups")})]}),e.jsxs("div",{className:"output-panel",children:[e.jsxs("div",{className:"output-header",children:[e.jsx("label",{className:"panel-label",children:n("widgets.group_generator.generated_groups_label")}),e.jsxs("button",{className:"expand-button",onClick:()=>_(!p),disabled:l.length===0,children:[p?e.jsx($,{size:16}):e.jsx(J,{size:16}),e.jsx("span",{children:n(p?"widgets.group_generator.close_large_view":"widgets.group_generator.view_large")})]})]}),e.jsx("div",{className:"groups-container",children:l.length>0?l.map((t,s)=>e.jsxs("div",{className:"group-card",children:[e.jsx("h4",{className:"group-title",children:n("widgets.group_generator.group_title",{number:s+1})}),e.jsx("ul",{children:t.map(r=>e.jsx("li",{children:r},r))})]},s)):e.jsx("p",{className:"no-groups-message",children:n("widgets.group_generator.no_groups_message")})})]}),p&&e.jsx("div",{className:"groups-overlay",onClick:()=>_(!1),children:e.jsxs("div",{className:"groups-overlay-content",ref:M,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"groups-overlay-header",ref:S,children:[e.jsx("h3",{children:n("widgets.group_generator.generated_groups_label")}),e.jsxs("button",{className:"expand-button",onClick:()=>_(!1),children:[e.jsx($,{size:16}),e.jsx("span",{children:n("widgets.group_generator.close_large_view")})]})]}),e.jsx("div",{className:"groups-container groups-container-large",ref:G,children:l.length>0?l.map((t,s)=>e.jsxs("div",{className:"group-card group-card-large",children:[e.jsx("h4",{className:"group-title",children:n("widgets.group_generator.group_title",{number:s+1})}),e.jsx("ul",{children:t.map(r=>e.jsx("li",{children:r},r))})]},s)):e.jsx("p",{className:"no-groups-message",children:n("widgets.group_generator.no_groups_message")})})]})})]})};export{je as GroupGeneratorWidget,ve as widgetConfig};
