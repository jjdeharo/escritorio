import{u as k,r as o,j as e,I as C,W as p,a5 as N,a6 as _}from"./react-vendor-C9LHBUkp.js";import{u as y}from"./index-DIQ32RE2.js";import{t as D}from"./index-DIQ32RE2.js";import"./vendor-BnVc6iZf.js";import"./editor-vendor-Dlj3R3R2.js";import"./i18n-vendor-DdbEjq8F.js";const E=()=>{const{t:n}=k(),[t,f]=y("image-carousel-images",[]),[r,c]=o.useState(0),l=o.useRef(null),w=i=>{const s=i.target.files;if(console.log("Files selected:",s?.length),!s||s.length===0)return;const u=[];for(let a=0;a<s.length;a++){const g=s[a];if(console.log("Processing file:",g.name,"type:",g.type),g.type.startsWith("image/")){const j=new Promise((v,b)=>{const h=new FileReader;h.onload=x=>v(x.target?.result),h.onerror=x=>b(x),h.readAsDataURL(g)});u.push(j)}}console.log("Image promises created:",u.length),Promise.all(u).then(a=>{console.log("Images loaded successfully:",a.length),console.log("Setting images to:",a),f(a),c(0),l.current&&(l.current.value="")}).catch(a=>{console.error("Error loading images:",a)})},d=o.useCallback(()=>{if(t.length<=1)return;const s=r===0?t.length-1:r-1;c(s)},[r,t.length]),m=o.useCallback(()=>{if(t.length<=1)return;const s=r===t.length-1?0:r+1;c(s)},[r,t.length]);return o.useEffect(()=>{const i=s=>{if(t.length!==0)switch(s.key){case"ArrowLeft":s.preventDefault(),d();break;case"ArrowRight":s.preventDefault(),m();break}};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t.length,d,m]),console.log("Current render state - images.length:",t.length,"currentIndex:",r),e.jsxs("div",{className:"image-carousel-widget",children:[t.length===0?e.jsxs("div",{className:"placeholder-view",children:[e.jsx(C,{size:64,className:"text-gray-400"}),e.jsx("p",{className:"mt-4 text-center",children:n("widgets.image_carousel.no_images")}),e.jsxs("button",{onClick:()=>l.current?.click(),className:"upload-button",children:[e.jsx(p,{size:18}),n("widgets.image_carousel.select_images")]})]}):e.jsxs("div",{className:"carousel-view",children:[e.jsxs("div",{className:"carousel-image-container",children:[e.jsx("img",{src:t[r],alt:n("widgets.image_carousel.slide_alt",{number:r+1})}),e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",background:"rgba(0,0,0,0.7)",color:"white",padding:"5px",borderRadius:"3px"},children:[r+1," / ",t.length,t.length===1&&e.jsx("div",{style:{fontSize:"12px",marginTop:"3px"},children:n("widgets.image_carousel.more_images_hint")})]})]}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"carousel-arrow left-arrow",onClick:d,children:e.jsx(N,{size:32})}),e.jsx("button",{className:"carousel-arrow right-arrow",onClick:m,children:e.jsx(_,{size:32})})]}),t.length>1&&e.jsx("div",{className:"slide-indicators",children:t.map((i,s)=>e.jsx("div",{className:`indicator-dot ${r===s?"active":""}`,onClick:()=>c(s)},s))}),e.jsx("button",{onClick:()=>l.current?.click(),className:"change-images-button",title:n("widgets.image_carousel.select_new_images"),children:e.jsx(p,{size:16})})]}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",ref:l,onChange:w,className:"hidden"})]})};export{E as ImageCarouselWidget,D as widgetConfig};
