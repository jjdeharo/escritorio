import{u as I,r as s,j as t,ar as T,as as k,aL as y}from"./react-vendor-C9LHBUkp.js";import{M as W}from"./index-DIQ32RE2.js";import"./vendor-BnVc6iZf.js";import"./editor-vendor-Dlj3R3R2.js";import"./i18n-vendor-DdbEjq8F.js";const D=()=>{const{t:h}=I(),[i,g]=s.useState(5),[c,b]=s.useState(0),[f,v]=s.useState(300),[r,l]=s.useState(300),[n,d]=s.useState(!1),x=s.useRef(null),[S,j]=s.useState(48),m=s.useRef(48);s.useEffect(()=>{let e;return n&&r>0?e=setInterval(()=>{l(a=>a-1)},1e3):r===0&&n&&d(!1),()=>clearInterval(e)},[n,r]);const w=()=>{const e=i*60+c;v(e),n||l(e)};s.useEffect(w,[i,c]),s.useEffect(()=>{const e=x.current;if(!e)return;const a=()=>{const{width:R,height:M}=e.getBoundingClientRect(),C=Math.max(32,Math.min(R*.3,M*.7)),u=Math.floor(C);u!==m.current&&(m.current=u,j(u))};a();const o=new ResizeObserver(a);return o.observe(e),()=>o.disconnect()},[]);const z=()=>{f<=0||(r===0&&p(),d(!n))},p=()=>{d(!1),l(f)},N=e=>{const a=Math.floor(e/60),o=e%60;return`${String(a).padStart(2,"0")}:${String(o).padStart(2,"0")}`};return t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-text-dark p-4 overflow-hidden",children:[t.jsx("div",{className:"flex-1 w-full flex items-center justify-center",ref:x,children:t.jsx("div",{className:"font-bold font-mono leading-none",style:{fontSize:`${S}px`,color:"var(--color-text-light)",textShadow:"0 2px 8px rgba(0, 0, 0, 0.55)",WebkitTextStroke:"1px rgba(0, 0, 0, 0.45)"},children:r===0&&!n?h("widgets.timer.finished"):N(r)})}),t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("input",{type:"number",className:"w-20 text-center bg-white/85 border-2 border-accent rounded p-1 text-text-dark",value:i,onChange:e=>g(Math.max(0,parseInt(e.target.value)||0)),disabled:n}),t.jsx("span",{className:"text-2xl font-bold",children:":"}),t.jsx("input",{type:"number",className:"w-20 text-center bg-white/85 border-2 border-accent rounded p-1 text-text-dark",value:c,onChange:e=>b(Math.max(0,Math.min(59,parseInt(e.target.value)||0))),disabled:n})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:z,className:"p-3 bg-accent rounded-full hover:bg-[#8ec9c9]",children:n?t.jsx(T,{size:24}):t.jsx(k,{size:24})}),t.jsx("button",{onClick:p,className:"p-3 bg-white/85 border-2 border-accent rounded-full hover:bg-accent/50",children:t.jsx(y,{size:24})})]})]})};export{D as TimerWidget,W as widgetConfig};
