import{u as b,r as a,j as e,a7 as N,J as D}from"./react-vendor-C9LHBUkp.js";import{e as k}from"./index-DIQ32RE2.js";import"./vendor-BnVc6iZf.js";import"./editor-vendor-Dlj3R3R2.js";import"./i18n-vendor-DdbEjq8F.js";const E=()=>{const{t:l}=b(),[c,p]=a.useState(2),[g,d]=a.useState([]),[u,m]=a.useState(0),[r,f]=a.useState(!1),o=a.useRef(null);a.useEffect(()=>{o.current=new Audio("/sounds/dice-142528.mp3")},[]);const x=()=>{if(r||!o.current)return;f(!0),o.current.currentTime=0,o.current.play().catch(t=>{console.error("Error al reproducir el audio:",t)});const s=Array.from({length:c},(t,i)=>({id:i,value:Math.floor(Math.random()*6)+1,isRolling:!0}));d(s),m(0),setTimeout(()=>{let t=0;const i=s.map(n=>(t+=n.value,{...n,isRolling:!1}));d(i),m(t),f(!1)},1500)},h=s=>{if(r)return;const t=parseInt(s.target.value,10);t>0&&t<=10&&p(t)},j=({value:s,isRolling:t})=>{const i=n=>e.jsx("div",{className:`face face-${n}`,children:Array.from({length:n}).map((R,v)=>e.jsx("span",{className:"dot"},v))});return e.jsx("div",{className:"die-scene",children:e.jsxs("div",{className:`die-3d ${t?"rolling":`show-${s}`}`,children:[i(1),i(2),i(3),i(4),i(5),i(6)]})})};return e.jsxs("div",{className:"dice-widget",children:[e.jsxs("div",{className:"controls",children:[e.jsxs("div",{className:"dice-selector",children:[e.jsx("label",{htmlFor:"num-dice-input",children:l("widgets.dice.num_dice")}),e.jsx("input",{id:"num-dice-input",type:"number",value:c,onChange:h,min:"1",max:"10",disabled:r})]}),e.jsxs("button",{onClick:x,className:"roll-button",disabled:r,children:[e.jsx(N,{size:20}),l(r?"widgets.dice.rolling":"widgets.dice.roll_dice")]})]}),e.jsx("div",{className:"dice-container",children:g.map(s=>e.jsx(j,{value:s.value,isRolling:s.isRolling},s.id))}),!r&&u>0&&e.jsxs("div",{className:"total",children:[l("widgets.dice.total")," ",e.jsx("span",{children:u})]}),e.jsx("a",{href:"https://pixabay.com/users/u_qpfzpydtro-29496424/?utm_source=link-attribution&utm_medium=referral",target:"_blank",rel:"noopener noreferrer",className:"attribution-button",title:"Sound Effect by u_qpfzpydtro from Pixabay",onClick:s=>s.stopPropagation(),children:e.jsx(D,{size:12})})]})};export{E as DiceWidget,k as widgetConfig};
