import{u as $,r,a as y,j as t,$ as N}from"./index-DZlaiE3f.js";import{a0 as B}from"./index-DZlaiE3f.js";import{C as h}from"./circle-CEkRvvjA.js";import{R as k}from"./rotate-ccw-BPrcVd8a.js";const S=()=>{const{t:a}=$(),[n,x]=r.useState(Array(9).fill(null)),[d,_]=r.useState(!0),[c,o]=y("tictactoe-players",{X:"Jugador 1",O:"Jugador 2"});r.useEffect(()=>{const e=a("widgets.tic_tac_toe.player_1"),s=a("widgets.tic_tac_toe.player_2");e!=="widgets.tic_tac_toe.player_1"&&s!=="widgets.tic_tac_toe.player_2"&&c.X==="Jugador 1"&&c.O==="Jugador 2"&&o({X:e,O:s})},[a,c,o]);const[g,u]=y("tictactoe-score",{X:0,O:0}),[i,p]=r.useState(null),f=(e,s)=>{o({...c,[e]:s})},X=e=>{const s=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let m=0;m<s.length;m++){const[l,v,z]=s[m];if(e[l]&&e[l]===e[v]&&e[l]===e[z])return e[l]}return null};r.useEffect(()=>{const e=X(n);e&&!i&&(p(e),u(s=>({...s,[e]:s[e]+1})))},[n,i,u]);const b=e=>{if(i||n[e])return;const s=[...n];s[e]=d?"X":"O",x(s),_(!d)},j=()=>{x(Array(9).fill(null)),p(null),_(!0)},O=()=>{window.confirm(a("widgets.tic_tac_toe.reset_confirm"))&&(j(),u({X:0,O:0}),o({X:a("widgets.tic_tac_toe.player_1"),O:a("widgets.tic_tac_toe.player_2")}))},w=!i&&n.every(Boolean),C=i?`${a("widgets.tic_tac_toe.winner")} ${c[i]}!`:w?a("widgets.tic_tac_toe.draw"):`${a("widgets.tic_tac_toe.next_turn")} ${c[d?"X":"O"]}`;return t.jsxs("div",{className:"tic-tac-toe-widget",children:[t.jsxs("div",{className:"game-info",children:[t.jsxs("div",{className:"player-input",children:[t.jsx(N,{size:16,className:"text-blue-500"}),t.jsx("input",{type:"text",value:c.X,onChange:e=>f("X",e.target.value)}),t.jsx("span",{className:"player-score",children:g.X})]}),t.jsxs("div",{className:"player-input",children:[t.jsx(h,{size:16,className:"text-red-500"}),t.jsx("input",{type:"text",value:c.O,onChange:e=>f("O",e.target.value)}),t.jsx("span",{className:"player-score",children:g.O})]})]}),t.jsx("div",{className:"game-board-container",children:t.jsx("div",{className:"game-board",children:n.map((e,s)=>t.jsxs("button",{className:"square",onClick:()=>b(s),disabled:!!e||!!i,children:[e==="X"&&t.jsx(N,{size:48,className:"text-blue-500"}),e==="O"&&t.jsx(h,{size:48,className:"text-red-500"})]},s))})}),t.jsxs("div",{className:"game-footer",children:[t.jsx("p",{className:"status",children:C}),(i||w)&&t.jsx("button",{onClick:j,className:"action-button",children:a("widgets.tic_tac_toe.next_round")}),t.jsx("button",{onClick:O,className:"reset-game-button",title:a("widgets.tic_tac_toe.reset_all"),children:t.jsx(k,{size:16})})]})]})};export{S as TicTacToeWidget,B as widgetConfig};
